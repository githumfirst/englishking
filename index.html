<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>원어민 영어 연습</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app-shell">
    <header class="topbar">
      <div class="brand">
        <div class="logo-dot" aria-hidden="true"></div>
        <div>
          <div class="brand-title">Native English</div>
          <div class="brand-sub">10,000 sentences</div>
        </div>
      </div>

      <div id="topbarAuth" class="topbar-actions">
        <input id="authEmail" class="auth-input" placeholder="email" />
        <input id="authPass" class="auth-input" placeholder="password" type="password" />
        <button id="btnLogin" class="btn primary">로그인</button>
        <button id="btnLogout" class="btn">로그아웃</button>
      </div>
    </header>

    <main class="page">
      <section id="pageDashboard">
        <div class="page-head">
          <div>
            <h1 class="h1">1만 문장으로 원어민 되기</h1>
            <div class="muted">시작/종료 기반으로 자동 계산되고, 진도는 연습 페이지 입력 횟수로 집계됩니다.</div>
          </div>
          <div class="page-head-actions">
            <div id="authStatus" class="muted"></div>
            <button id="gotoPractice" class="btn primary">연습하기 →</button>
          </div>
        </div>

        <div class="card">
          <div style="display:grid; grid-template-columns:repeat(3, minmax(0,1fr)); gap:10px;">
            <label class="field">
              <span class="muted">시작일</span>
              <input id="dashStart" type="date" />
            </label>
            <label class="field">
              <span class="muted">종료일</span>
              <input id="dashEnd" type="date" />
            </label>
            <label class="field">
              <span class="muted">목표 문장수</span>
              <input id="dashGoal" type="number" />
            </label>
          </div>

          <!-- progress bar -->
          <div style="margin-top:14px; position:relative; height:14px; border-radius:999px; border:1px solid rgba(255,255,255,.10); background:rgba(255,255,255,.07); overflow:hidden;">
            <div id="progressFill" style="height:100%; width:0%; background:linear-gradient(90deg, rgba(0,255,198,.9), rgba(120,80,255,.85));"></div>
            <div id="todayMarker" style="position:absolute; top:-10px; bottom:-10px; width:6px; left:0%; background:linear-gradient(180deg, #ffd166, #ff5d5d); border-radius:999px;"></div>
          </div>

          <!-- ✅ 초록 박스 안으로 KPI + todayTargetText 이동 -->
          <div class="dash-greenbox">
            <!-- ✅ 여기부터: 세로 KPI 요약 -->
            <div class="dash-kpi">
              <div class="kpi-row">
                <span class="k">공부기간</span>
                <span class="v" id="kpiDuration">-</span>
              </div>

              <div class="kpi-row">
                <span class="k">일일목표</span>
                <span class="v" id="kpiDaily">-</span>
              </div>

              <div class="kpi-row">
                <span class="k">오늘까지 누계목표</span>
                <span class="v" id="kpiCumTarget">-</span>
              </div>

              <div class="kpi-row">
                <span class="k">현재까지 공부한 문장</span>
                <span class="v">
                  <span id="kpiDone">-</span>
                  <span id="kpiDelta" class="kpi-sub"> </span>
                </span>
              </div>

              <div class="kpi-row">
                <span class="k">달성율</span>
                <span class="v">
                  <span id="kpiPercent">-</span>
                </span>
              </div>
            </div>
            <!-- ✅ 여기까지: 세로 KPI 요약 -->
          </div>
        </div>
      </section>

      <section id="pagePractice" class="hidden">
        <div class="page-head">
          <div>
            <div class="practice-title-row">
              <h1 class="h1 practice-title">원어민영어 연습</h1>
              <button id="gotoDashboard" class="btn primary">대시보드 가기 →</button>
            </div>
          </div>

          <div class="page-head-actions">
            <button id="btnExport" class="btn">JSON 내보내기</button>
            <label class="btn filelike">
              JSON 가져오기
              <input id="fileImport" type="file" accept="application/json" />
            </label>
          </div>
        </div>

        <div class="card">
          <div class="table-wrap">
            <!-- ✅ 테이블은 딱 1개만 -->
            <table class="tbl">
              <!-- colgroup은 지금 CSS(grid) 구조에서는 큰 의미가 없지만, 유지하고 싶으면 여기 1번만 둬도 됨 -->
              <colgroup>
                <col style="width:56px" />     <!-- # -->
                <col />                        <!-- 한글(남는 폭 전부) -->
                <col style="width:150px" />    <!-- 결과 -->
                <col style="width:120px" />    <!-- 최종5회 -->
                <col style="width:70px" />     <!-- 횟수 -->
                <col style="width:120px" />    <!-- 리뷰데이 -->
                <col style="width:84px" />     <!-- 삭제 -->
                <col style="width:0" />        <!-- 영어(지금 구조에선 영향 적음) -->
              </colgroup>

              <!-- ✅ practiceBody도 1개만 -->
              <tbody id="practiceBody"></tbody>
            </table>
          </div>

          <div style="margin-top:10px; display:flex; justify-content:flex-start; padding-left:12px;">
            <button id="addRow" class="btn primary">+ 행 추가</button>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="app.js"></script>
</body>
</html>
